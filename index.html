<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Cricket Score Overlay</title>
  <style>
    body {
      margin: 0;
      background: rgba(0,0,0,0);
      overflow: hidden;
      font-family: Arial, sans-serif;
      color: white;
    }

    .scorebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px 15px;
      box-sizing: border-box;
      font-size: 20px;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr; /* Left | Center | Right */
      align-items: center;
      margin: 2px 0;
    }

    .center {
      text-align: center;
      font-weight: bold;
    }

    .scoreline {
      font-size: 24px;
      font-weight: bold;
    }

    .crr {
      font-size: 18px;
      font-style: italic;
    }

    .left { text-align: left; }
    .right { text-align: right; }
  </style>
</head>
<body>
  <div class="scorebar">
    <!-- Row 1 -->
    <div class="row">
      <div class="left" id="player1">Loading...</div>
      <div class="center scoreline" id="scoreline">Loading...</div>
      <div class="right" id="bowler">Loading...</div>
    </div>

    <!-- Row 2 -->
    <div class="row">
      <div class="left" id="player2">Loading...</div>
      <div class="center crr" id="crr">Loading...</div>
      <div class="right" id="lastover">Loading...</div>
    </div>
  </div>

  <script>
    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBBphs5H4uRDzOf_wVI4ExfDz3hDAFYn3GWi9uorlEfN3MJLlfgzFfsKq94ccgGg/pub?gid=658195036&single=true&output=csv";

    async function fetchScore() {
      try {
        const res = await fetch(sheetURL);
        const text = await res.text();

        const line = text.trim().split("\n")[0];
        if (!line) return;

        const parts = line.split("|").map(p => p.trim());

        // Expected parts:
        // [0] players (e.g. "Player1* 55(16) | Player2 15(3)")
        // [1] scoreline
        // [2] bowler
        // [3] last over
        // You already confirmed it's correct in network output.

        const playerParts = parts[0].split(" | ");
        document.getElementById("player1").innerText = playerParts[0] || "";
        document.getElementById("player2").innerText = playerParts[1] || "";

        document.getElementById("scoreline").innerText = parts[1] || "";
        document.getElementById("crr").innerText = parts[2] || "";
        document.getElementById("bowler").innerText = parts[2] || "";
        document.getElementById("lastover").innerText = parts[3] || "";
      } catch (e) {
        console.error("Error fetching score:", e);
      }
    }

    fetchScore();
    setInterval(fetchScore, 5000);
  </script>
</body>
</html>
