<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Cricket Score Overlay</title>
  <style>
    body {
      margin: 0;
      background: rgba(0,0,0,0); /* transparent background for overlay */
      overflow: hidden;
      font-family: Arial, sans-serif;
      color: white;
    }

    .scorebar {
      position: fixed;
      top: 0; /* ðŸ‘ˆ moved from bottom to top */
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      flex-direction: column;
      padding: 6px 12px;
      box-sizing: border-box;
    }

    .line {
      display: flex;
      justify-content: space-between;
      white-space: nowrap;
      overflow: hidden;
    }

    /* Auto-shrink text */
    .shrink {
      flex: 1;
      font-size: 22px;
      font-weight: bold;
      text-align: center;
    }
    .shrink span {
      display: inline-block;
      max-width: 100%;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Fixed readable size */
    .fixed {
      font-size: 20px;
      text-align: center;
      margin-top: 2px;
    }
  </style>
</head>
<body>
  <div class="scorebar">
    <div class="line shrink"><span id="players">Loading...</span></div>
    <div class="line shrink"><span id="scoreline">Loading...</span></div>
    <div class="line fixed" id="bowler">Loading...</div>
    <div class="line shrink"><span id="lastover">Loading...</span></div>
  </div>

  <script>
    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBBphs5H4uRDzOf_wVI4ExfDz3hDAFYn3GWi9uorlEfN3MJLlfgzFfsKq94ccgGg/pub?gid=658195036&single=true&output=csv";

    async function fetchScore() {
      try {
        const res = await fetch(sheetURL);
        const text = await res.text();

        const line = text.trim().split("\n")[0]; // get first row
        if (!line) return;

        const parts = line.split("|").map(p => p.trim());

        document.getElementById("players").innerHTML   = parts[0] || "";
        document.getElementById("scoreline").innerHTML = parts[1] || "";
        document.getElementById("bowler").innerHTML    = parts[2] || "";
        document.getElementById("lastover").innerHTML  = parts[3] || "";
      } catch (e) {
        console.error("Error fetching score:", e);
      }
    }

    fetchScore();
    setInterval(fetchScore, 5000); // refresh every 5 sec
  </script>
</body>
</html>
