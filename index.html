<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cricket Score Overlay</title>
<style>
  body { 
    margin:0; 
    background: rgba(0,0,0,0); 
    font-family: Arial, sans-serif; 
    color: white; 
  }

  .scorebar {
    position: fixed;
    top: 10px; /* a little gap from top */
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    background: rgba(0,0,0,0.6); /* semi-transparent black */
    border-radius: 15px; /* rounded corners */
    padding: 10px 15px;
    box-sizing: border-box;
    box-shadow: 0 4px 8px rgba(0,0,0,0.5);
  }

  .row {
    display: grid;
    grid-template-columns: 1.5fr 3fr 1.5fr; /* Left | Center | Right */
    align-items: center;
    margin: 3px 0;
  }

  .left { text-align: left; }
  .center { text-align: center; }
  .right { text-align: right; }

  .scoreline { 
    font-size: 26px; 
    font-weight: bold; 
    color: #ffdd00; 
    text-shadow: 2px 2px 4px black; 
  }

  .crr { 
    font-size: 18px; 
    font-style: italic; 
    color: #ffffff; 
  }

  .ball { 
    display:inline-block; 
    margin:0 2px; 
    padding:3px 6px; 
    border-radius:50%; 
    font-weight:bold; 
    font-size:14px; 
  }
  .dot { background: gray; }
  .run { background: green; }
  .four { background: blue; }
  .six { background: gold; color: black; }
  .wicket { background: red; }
  .wide { background: orange; }
</style>
</head>
<body>

<div class="scorebar">
  <!-- Row 1 -->
  <div class="row">
    <div class="left" id="player1">Loading...</div>
    <div class="center scoreline" id="scoreline">Loading...</div>
    <div class="right" id="bowler">Loading...</div>
  </div>

  <!-- Row 2 -->
  <div class="row">
    <div class="left" id="player2">Loading...</div>
    <div class="center crr" id="crr">Loading...</div>
    <div class="right" id="lastover">Loading...</div>
  </div>
</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBBphs5H4uRDzOf_wVI4ExfDz3hDAFYn3GWi9uorlEfN3MJLlfgzFfsKq94ccgGg/pub?output=csv";

function formatBall(ball) {
  const b = ball.trim().toLowerCase();
  if (b === "w") return `<span class="ball wicket">W</span>`;
  if (b === "0") return `<span class="ball dot">0</span>`;
  if (b === "wd") return `<span class="ball wide">Wd</span>`;
  if (b === "4") return `<span class="ball four">4</span>`;
  if (b === "6") return `<span class="ball six">6</span>`;
  if (!isNaN(b)) return `<span class="ball run">${b}</span>`;
  return `<span class="ball">${ball}</span>`;
}

async function fetchScore() {
  try {
    const res = await fetch(sheetURL);
    const text = await res.text();
    const line = text.trim().split("\n")[0];
    if (!line) return;

    const parts = line.split("|").map(p => p.trim());

    document.getElementById("player1").innerText = parts[0] || "";
    document.getElementById("player2").innerText = parts[1] || "";
    document.getElementById("scoreline").innerText = parts[2] || "";
    document.getElementById("crr").innerText = parts[3] || "";
    document.getElementById("bowler").innerText = parts[4] || "";

    if(parts[5]){
      const ballsText = parts[5].replace(/^This Over:\s*/i,"");
      const balls = ballsText.split(" ").map(formatBall).join(" ");
      document.getElementById("lastover").innerHTML = "This Over: " + balls;
    }

  } catch(e){
    console.error("Error fetching score:", e);
  }
}

fetchScore();
setInterval(fetchScore, 5000);
</script>

</body>
</html>

